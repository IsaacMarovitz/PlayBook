<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>How It&#x27;s Made - PlayBook</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../Introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../getting_started/download_playcover.html"><strong aria-hidden="true">1.</strong> Download & Install PlayCover</a></li><li class="chapter-item expanded "><a href="../getting_started/download_ipa.html"><strong aria-hidden="true">2.</strong> Download & Install iOS .ipa files</a></li><li class="chapter-item expanded "><a href="../getting_started/troubleshoot_login.html"><strong aria-hidden="true">3.</strong> Troubleshoot App Login Issues</a></li><li class="chapter-item expanded "><a href="../getting_started/migrating.html"><strong aria-hidden="true">4.</strong> Migrating from an Older Version</a></li><li class="chapter-item expanded "><a href="../getting_started/alt_xcode_cli_install.html"><strong aria-hidden="true">5.</strong> Alternate Xcode Command Line Tools Installation Methods</a></li><li class="chapter-item expanded affix "><li class="part-title">Keymapping</li><li class="chapter-item expanded "><a href="../keymapping/using_making_keymaps.html"><strong aria-hidden="true">6.</strong> Using & Making Keymaps</a></li><li class="chapter-item expanded "><a href="../keymapping/import_export_keymaps.html"><strong aria-hidden="true">7.</strong> Importing & Exporting Keymaps</a></li><li class="chapter-item expanded "><a href="../keymapping/common_issues.html"><strong aria-hidden="true">8.</strong> Common Issues</a></li><li class="chapter-item expanded affix "><li class="part-title">Settings</li><li class="chapter-item expanded "><a href="../settings/keymapping.html"><strong aria-hidden="true">9.</strong> Keymapping</a></li><li class="chapter-item expanded "><a href="../settings/graphics.html"><strong aria-hidden="true">10.</strong> Graphics</a></li><li class="chapter-item expanded "><a href="../settings/jailbreak_bypass.html"><strong aria-hidden="true">11.</strong> Jailbreak Bypass</a></li><li class="chapter-item expanded "><a href="../settings/miscellaneous.html"><strong aria-hidden="true">12.</strong> Miscellaneous</a></li><li class="chapter-item expanded affix "><li class="part-title">Building from Source</li><li class="chapter-item expanded "><a href="../building_from_source/why_build.html"><strong aria-hidden="true">13.</strong> Why Build From Source?</a></li><li class="chapter-item expanded "><a href="../building_from_source/install_prerequisites.html"><strong aria-hidden="true">14.</strong> Install Prerequisites</a></li><li class="chapter-item expanded "><a href="../building_from_source/building.html"><strong aria-hidden="true">15.</strong> Building</a></li><li class="chapter-item expanded affix "><li class="part-title">PlayTools</li><li class="chapter-item expanded "><a href="../playtools/how_its_made.html" class="active"><strong aria-hidden="true">16.</strong> How It's Made</a></li><li class="chapter-item expanded "><a href="../playtools/main_features.html"><strong aria-hidden="true">17.</strong> Main Features</a></li><li class="chapter-item expanded "><a href="../playtools/akinterface.html"><strong aria-hidden="true">18.</strong> AKInterface</a></li><li class="chapter-item expanded affix "><li class="part-title">Contributing</li><li class="chapter-item expanded "><a href="../contributing/forking_making_pr.html"><strong aria-hidden="true">19.</strong> Forking & Making PRs</a></li><li class="chapter-item expanded "><a href="../contributing/code_of_conduct.html"><strong aria-hidden="true">20.</strong> Code of Conduct</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="right-buttons">
                        <a href="https://github.com/PlayCover/PlayBook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/PlayCover/PlayBook/edit/master/PlayBook/src/playtools/how_its_made.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="how-its-made"><a class="header" href="#how-its-made">How It's Made</a></h1>
<h2 id="this-documentation-is-not-intended-for-average-users-technical-programmer-jargon-incoming"><a class="header" href="#this-documentation-is-not-intended-for-average-users-technical-programmer-jargon-incoming">This documentation is not intended for average users! Technical programmer jargon incoming!</a></h2>
<blockquote>
<p>Here be dragons. PlayTools code is complicated, messy, and largely undocumented. We are working to improve the quality of the code base over time but be aware, <strong>it is not easily understood.</strong></p>
</blockquote>
<h2 id="what-even-is-playtools"><a class="header" href="#what-even-is-playtools">What even is PlayTools?</a></h2>
<p>PlayTools is a dynamic library or <code>.dylib</code> that adds all sorts of fun features to your favourite apps and games like custom window resolution, custom keymapping, compatability fixes, and more. We accomplish this by <strong>injecting</strong> a PlayTools load command into the target executable.</p>
<h2 id="whats-a-load-command"><a class="header" href="#whats-a-load-command">What's a load command?</a></h2>
<p>Executables on macOS/iOS etc... use the MachO file format. There are lots of guides available delving deep into the structure of this format which can get quite complicated and technical. Long story short, MachO executables are divided up into various sections. One of those sections defines the dynamic libraries that the executable needs to run. This would include stuff like <code>SwiftUI</code> or <code>AppKit</code> or any other sort of external pre-compiled dependancy or framework not included in the app's bundle. To get the target app to therefore load PlayTools, we simply need to add a load command <em>for</em> PlayTools. We achieve this using a tool called <a href="https://github.com/alexzielenski/optool">optool</a>.</p>
<h2 id="great-now-what"><a class="header" href="#great-now-what">Great. Now what?</a></h2>
<p>Loading the <code>.dylib</code> isn't enough to actually get our code to do anything. Because the target application isn't going to actually call any of PlayTools' functions of its own volition, we need to create an entry point for ourselves. Enter <code>NSObject</code>. <code>NSObject</code> is handy because it has a couple of functions we can use to start our code right as the application starts with the main binary, namely the <code>load</code>, <code>init</code>, and <code>initialize</code> functions. PlayTools utilises these functions to start up many of our tools.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../building_from_source/building.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../playtools/main_features.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../building_from_source/building.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../playtools/main_features.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../prettylink.js"></script>
    </body>
</html>
